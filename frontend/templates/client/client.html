<alert ng-show="alert" type="{{alert.type}}" close="close()">{{alert.msg}}</alert>
<nav-menu></nav-menu>

<div ng-show="!confirm" class="center">
    <h1>{{edit?'Edit':'New' }} client</h1>
</div>

<div class="center">
    <form>
        <div class="form-group">
            <label>First name <span class="red">*</span></label>
            <input type="text" class="form-control no-border" ng-model="client.name"
                   ng-keyup="$event.keyCode == 13 && client.name && client.email && client.emailConfirm &&
                   client.password && client.CPF? save() : null">
        </div>
        <div class="form-group">
            <label>Surname</label>
            <input type="text" class="form-control no-border" ng-model="client.surname"
                   ng-keyup="$event.keyCode == 13 && client.name && client.email && client.emailConfirm &&
                   client.password && client.CPF? save() : null">
        </div>
        <div class="form-group">
            <label>Email address <span class="red">*</span></label>
            <input type="email" class="form-control no-border" ng-model="client.email"
                   ng-keyup="$event.keyCode == 13 && client.name && client.email && client.emailConfirm &&
                   client.password && client.CPF? save() : null">
        </div>
        <div class="form-group">
            <label>Confirm email address <span class="red">*</span></label>
            <input type="email" class="form-control no-border" ng-model="client.emailConfirm"
                   ng-keyup="$event.keyCode == 13 && client.name && client.email && client.emailConfirm &&
                   client.password && client.CPF? save() : null">
        </div>
        <div class="form-group">
            <label>Password <span class="red">*</span></label>
            <input type="password" class="form-control no-border" ng-model="client.password"
                   ng-keyup="$event.keyCode == 13 && client.name && client.email && client.emailConfirm &&
                   client.password && client.CPF? save() : null">
        </div>
        <div class="form-group">
            <label>CPF (Document Identification) <span class="red">*</span></label>
            <input type="text" class="form-control no-border" ng-model="client.CPF" ui-mask="999.999.999-99"
                   ng-keyup="$event.keyCode == 13 && client.name && client.email && client.emailConfirm &&
                   client.password && client.CPF? save() : null">
        </div>
        <div class="form-group">
            <label>Address</label>
            <input type="text" class="form-control no-border" ng-model="client.address"
                   ng-keyup="$event.keyCode == 13 && client.name && client.email && client.emailConfirm &&
                   client.password && client.CPF? save() : null">
        </div>
        <div class="form-group">
            <label>Marital status</label>
            <select class="form-control" ng-model="selectedMaritalStatus" ng-options="marital_status.data for marital_status in marital_statuses"
                    ng-keyup="$event.keyCode == 13 && client.name && client.email && client.emailConfirm &&
                   client.password && client.CPF? save() : null">
                <option style="display: none" value="">Select one</option>
            </select>
        </div>
        <div class="form-group" ng-repeat="phone_number in phone_numbers track by $index">
            <label>Phone number {{$index+1}}</label>
            <span class="btn btn-sm btn-info pull-right" ng-click="addPhoneNumber()" ng-show="phone_numbers.length==$index+1">
                <i class="glyphicon glyphicon-plus"></i> Add phone number
            </span>
            <span class="phone-number-remove pull-right" ng-show="phone_numbers.length!=$index+1" ng-click="removePhoneNumber($index)">
                <i class="glyphicon glyphicon-remove"></i> Remove phone number {{$index+1}}
            </span>
            <br><br>
            <input type="text" class="form-control no-border" ng-model="phone_numbers[$index]" ui-br-phone-number
                   ng-keyup="$event.keyCode == 13 && client.name && client.email && client.emailConfirm &&
                   client.password && client.CPF? save() : null">
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-default" ui-sref="clientlist()">
                Cancelar
            </button>
            <button ng-disabled="saving||!client.name||!client.email||!client.emailConfirm||!client.password||!client.CPF"
                    type="submit" class="btn btn-primary" ng-click="save()">Save
            </button>
        </div>
    </form>
</div>